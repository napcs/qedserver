<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Thu Nov 11 09:12:13 EST 2010 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
StatisticsExtension (Jetty Server Project 6.1.26 API)
</TITLE>

<META NAME="date" CONTENT="2010-11-11">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../javadoc.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="StatisticsExtension (Jetty Server Project 6.1.26 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StatisticsExtension.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/mortbay/cometd/ext/ArrayIdQueue.html" title="class in org.mortbay.cometd.ext"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/mortbay/cometd/ext/StatisticsExtension.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StatisticsExtension.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.mortbay.cometd.ext</FONT>
<BR>
Class StatisticsExtension</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.mortbay.cometd.ext.StatisticsExtension</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>org.cometd.Extension</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>StatisticsExtension</B><DT>extends java.lang.Object<DT>implements org.cometd.Extension</DL>
</PRE>

<P>
StatisticsExtension

 This extension helps gather statistics about round-trip message times. It works by intercepting
 a message sent from a client to request a statistics measurement be started, and then propagates
 messages to each client, measuring how long it takes for the clients to receive and respond to
 the message. A summary of the statistics collected is then sent back to the originating client.

 The server recognizes a request to start a statistics measurement looking in the received message
 for a key with a particular value (_statsRequestSentinel). As clients can generate messages with
 arbitrarily deep structures, you can specify an array of keys (_statsRequestKeys), where each
 element in the array is one level deeper down a nested structure. NOTE that if your messages are
 not just Map<String,Object> you will need to subclass this extension to do the message examination.
 Optionally, the extension can only look for these messages on a specific channel (_statsRequestChannel).
 The message can also specify the time to wait for all clients to respond to the probe message. The default is 10seconds.

 For example, if the _statsReqestKeys =  {"chat"} and the sentinel is "//stats" (these is the default)
 a client would publish a message like so:

 <pre>chat: //stats,20</pre>

 The server will deliver a message back to the sending client:

 <pre>chat: //stats-confirm Statistic id=99 started. Results due in 20s.</pre>

 The inbound message is examined to see if it has the structure of a potential stats message.
 If a stats request is recognized, a new stats collection started, and the id of the stats
 collection and  timestamp on the server is appended. Then, the server passes the message back to
 Bayeux so that it can be processed, and published out.

 At this point, the extension's send() method is called. If a stats request with an id and
 timestamp is recognized, the outbound message is modifed to be a probe message (_probeSentinel)
 and the sending time appended to the message.

 A client receives the probe message, and responds by publishing a reply (_probeReplySentinel).

 Continuing the example above, assuming we set _probeSentinel = "stats-probe",
 then each client will receive a message like:
 <pre>chat: //stats-probe,20::--99::--1243945849978::--12345667464</pre>

 Where ::-- are field delimiters, 99 is the id of the statistic collection underway and 1243945849978
 is the time on the server the stats request was received, and 12345667464 is the server time at
 which the stats probe was published to all clients.

 The client responds with the same message, but prefixed by "//stats-reply":
 <pre>chat: //stats-reply::--99::--1243945849978::--12345667464</pre>

 The server receives the replies from each client, and updates the min,max and average
 statistics for:

 <ul>
 <li>RoundTrip: time since the stats request was received on the server to stats-reply
 <li>Application: time spent in the application between time stats request received to probe being published
 <li>Infrastructure: time since probe published to reply received
 <li>Cometd: portion of Infrastructure time that was due to cometd processing (estimate based on TimesyncExtension network lag calculation)
 </ul>

 In other words, if T0 is the time at which the original stats request is received on the server,
 and T1 is the time at which the stats probe is sent, and T2 is the time the probe reply is
 received:
 <ul>
 <li>RoundTrip = T2-T0
 <li>Application = T1-T0
 <li>Infrastructure = T2-T1
 <li>Cometd = Infrastructure - Lag
 </ul>

 After waiting the prescribed interval, eg 20 secs,  to collect as many of the clients'
 messages as possible, it sends a message to the client who originated the statistics request
 with the results, eg:

 <pre>chat://stats-results Id 2: samples=1, avgR=43, minR=43, maxR=43, avgI=42, minI=42, maxI=42, avgA=1, minA=1, maxA=1, avgC=42, minC=42, maxC=42</pre>

 Note that there can be many stats collections in progress at once.
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Statistic

 One measurement of min,max and average roundtrip time of a cometd message to all clients.</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_delim">_delim</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeChannel">_probeChannel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Channel on which outbound stats probes are sent to clients.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeKeys">_probeKeys</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Structure of keys to look for on outbound messages that indicate a probe being sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeReplyChannel">_probeReplyChannel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Channel on which to expect stats probe replies from clients.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeReplyKeys">_probeReplyKeys</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Structure of keys to look for on inbound message with probe replies from clients.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeReplySentinel">_probeReplySentinel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentinel prefix on inbound message with probe results from a client.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_probeSentinel">_probeSentinel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentinel prefix that is put on an outbound stats probe message to indicate a probe to all clients.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Map&lt;java.lang.String,<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statistics">_statistics</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statsConfirmSentinel">_statsConfirmSentinel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentinel sent to user to indicate confirmation of start of a stats run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statsRequestChannel">_statsRequestChannel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Channel on which to examine inbound messages for a stats request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statsRequestKeys">_statsRequestKeys</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Structure of keys to look for on inbound message that is a request to start a stats run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statsRequestSentinel">_statsRequestSentinel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentinel received on inbound that indicates request to start stats run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_statsResultSentinel">_statsResultSentinel</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sentinel prefix sent do user to indicate the results of the stats run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_timeout">_timeout</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.Timer</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#_timer">_timer</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;java.util.concurrent.atomic.AtomicLong</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#COUNTER">COUNTER</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#StatisticsExtension()">StatisticsExtension</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#createStatistic(org.cometd.Client, java.lang.String)">createStatistic</A></B>(org.cometd.Client&nbsp;from,
                java.lang.String&nbsp;marker)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start a statistics collection run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getDelim()">getDelim</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getProbeKeys()">getProbeKeys</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getProbeReplyKeys()">getProbeReplyKeys</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getProbeReplySentinel()">getProbeReplySentinel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getProbeSentinel()">getProbeSentinel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getStatsConfirmSentinel()">getStatsConfirmSentinel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getStatsRequestKeys()">getStatsRequestKeys</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getStatsRequestSentinel()">getStatsRequestSentinel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getStatsResultSentinel()">getStatsResultSentinel</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#getTimeout()">getTimeout</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#matchKeys(java.util.Map, java.lang.String[])">matchKeys</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;map,
          java.lang.String[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#matchMessage(org.cometd.Message, java.lang.String, java.lang.String[])">matchMessage</A></B>(org.cometd.Message&nbsp;message,
             java.lang.String&nbsp;channel,
             java.lang.String[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#matchSentinel(java.util.Map, java.lang.String, java.lang.String)">matchSentinel</A></B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;map,
              java.lang.String&nbsp;key,
              java.lang.String&nbsp;sentinel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#newStatistic(org.cometd.Client, long)">newStatistic</A></B>(org.cometd.Client&nbsp;from,
             long&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#onStatisticsRequest(org.cometd.Message)">onStatisticsRequest</A></B>(org.cometd.Message&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Override to be able to modify the message that has been identified as a statistics request</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.cometd.Message</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#rcv(org.cometd.Client, org.cometd.Message)">rcv</A></B>(org.cometd.Client&nbsp;from,
    org.cometd.Message&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called whenever a message is received from a client.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.cometd.Message</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#rcvMeta(org.cometd.Client, org.cometd.Message)">rcvMeta</A></B>(org.cometd.Client&nbsp;from,
        org.cometd.Message&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.cometd.Message</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#send(org.cometd.Client, org.cometd.Message)">send</A></B>(org.cometd.Client&nbsp;from,
     org.cometd.Message&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called before an outbound message is sent.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;org.cometd.Message</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#sendMeta(org.cometd.Client, org.cometd.Message)">sendMeta</A></B>(org.cometd.Client&nbsp;from,
         org.cometd.Message&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setDelim(java.lang.String)">setDelim</A></B>(java.lang.String&nbsp;delim)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeChannel(java.lang.String)">setProbeChannel</A></B>(java.lang.String&nbsp;channel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeKeys(java.lang.String[])">setProbeKeys</A></B>(java.lang.String[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeReplyChannel(java.lang.String)">setProbeReplyChannel</A></B>(java.lang.String&nbsp;channel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeReplyKeys(java.lang.String[])">setProbeReplyKeys</A></B>(java.lang.String[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeReplySentinel(java.lang.String)">setProbeReplySentinel</A></B>(java.lang.String&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setProbeSentinel(java.lang.String)">setProbeSentinel</A></B>(java.lang.String&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setStatsConfirmSentinel(java.lang.String)">setStatsConfirmSentinel</A></B>(java.lang.String&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setStatsRequestChannel(java.lang.String)">setStatsRequestChannel</A></B>(java.lang.String&nbsp;channel)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setStatsRequestKeys(java.lang.String[])">setStatsRequestKeys</A></B>(java.lang.String[]&nbsp;keys)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setStatsRequestSentinel(java.lang.String)">setStatsRequestSentinel</A></B>(java.lang.String&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setStatsResultSentinel(java.lang.String)">setStatsResultSentinel</A></B>(java.lang.String&nbsp;val)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#setTimeout(long)">setTimeout</A></B>(long&nbsp;timeout)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.html#updateStatistic(org.cometd.Client, org.cometd.Message, java.lang.String)">updateStatistic</A></B>(org.cometd.Client&nbsp;from,
                org.cometd.Message&nbsp;message,
                java.lang.String&nbsp;marker)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Update a statistics collection with the result for the client.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="COUNTER"><!-- --></A><H3>
COUNTER</H3>
<PRE>
protected static java.util.concurrent.atomic.AtomicLong <B>COUNTER</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statsRequestChannel"><!-- --></A><H3>
_statsRequestChannel</H3>
<PRE>
protected java.lang.String <B>_statsRequestChannel</B></PRE>
<DL>
<DD>Channel on which to examine inbound messages for a stats request. Can be null, in which case
 all channels are examined.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statsRequestKeys"><!-- --></A><H3>
_statsRequestKeys</H3>
<PRE>
protected java.lang.String[] <B>_statsRequestKeys</B></PRE>
<DL>
<DD>Structure of keys to look for on inbound message that is a request to start a stats run.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statsRequestSentinel"><!-- --></A><H3>
_statsRequestSentinel</H3>
<PRE>
protected java.lang.String <B>_statsRequestSentinel</B></PRE>
<DL>
<DD>Sentinel received on inbound that indicates request to start stats run.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statsConfirmSentinel"><!-- --></A><H3>
_statsConfirmSentinel</H3>
<PRE>
protected java.lang.String <B>_statsConfirmSentinel</B></PRE>
<DL>
<DD>Sentinel sent to user to indicate confirmation of start of a stats run.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statsResultSentinel"><!-- --></A><H3>
_statsResultSentinel</H3>
<PRE>
protected java.lang.String <B>_statsResultSentinel</B></PRE>
<DL>
<DD>Sentinel prefix sent do user to indicate the results of the stats run.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeChannel"><!-- --></A><H3>
_probeChannel</H3>
<PRE>
protected java.lang.String <B>_probeChannel</B></PRE>
<DL>
<DD>Channel on which outbound stats probes are sent to clients.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeSentinel"><!-- --></A><H3>
_probeSentinel</H3>
<PRE>
protected java.lang.String <B>_probeSentinel</B></PRE>
<DL>
<DD>Sentinel prefix that is put on an outbound stats probe message to indicate a probe to all clients.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeKeys"><!-- --></A><H3>
_probeKeys</H3>
<PRE>
protected java.lang.String[] <B>_probeKeys</B></PRE>
<DL>
<DD>Structure of keys to look for on outbound messages that indicate a probe being sent.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeReplyChannel"><!-- --></A><H3>
_probeReplyChannel</H3>
<PRE>
protected java.lang.String <B>_probeReplyChannel</B></PRE>
<DL>
<DD>Channel on which to expect stats probe replies from clients. Can be null, in which case,
 all channels are examined.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeReplyKeys"><!-- --></A><H3>
_probeReplyKeys</H3>
<PRE>
protected java.lang.String[] <B>_probeReplyKeys</B></PRE>
<DL>
<DD>Structure of keys to look for on inbound message with probe replies from clients.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_probeReplySentinel"><!-- --></A><H3>
_probeReplySentinel</H3>
<PRE>
protected java.lang.String <B>_probeReplySentinel</B></PRE>
<DL>
<DD>Sentinel prefix on inbound message with probe results from a client.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="_delim"><!-- --></A><H3>
_delim</H3>
<PRE>
protected java.lang.String <B>_delim</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="_statistics"><!-- --></A><H3>
_statistics</H3>
<PRE>
protected java.util.Map&lt;java.lang.String,<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A>&gt; <B>_statistics</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="_timer"><!-- --></A><H3>
_timer</H3>
<PRE>
protected java.util.Timer <B>_timer</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="_timeout"><!-- --></A><H3>
_timeout</H3>
<PRE>
protected long <B>_timeout</B></PRE>
<DL>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="StatisticsExtension()"><!-- --></A><H3>
StatisticsExtension</H3>
<PRE>
public <B>StatisticsExtension</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="setStatsRequestKeys(java.lang.String[])"><!-- --></A><H3>
setStatsRequestKeys</H3>
<PRE>
public void <B>setStatsRequestKeys</B>(java.lang.String[]&nbsp;keys)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStatsRequestKeys()"><!-- --></A><H3>
getStatsRequestKeys</H3>
<PRE>
public java.lang.String[] <B>getStatsRequestKeys</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setStatsRequestSentinel(java.lang.String)"><!-- --></A><H3>
setStatsRequestSentinel</H3>
<PRE>
public void <B>setStatsRequestSentinel</B>(java.lang.String&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStatsRequestSentinel()"><!-- --></A><H3>
getStatsRequestSentinel</H3>
<PRE>
public java.lang.String <B>getStatsRequestSentinel</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setStatsRequestChannel(java.lang.String)"><!-- --></A><H3>
setStatsRequestChannel</H3>
<PRE>
public void <B>setStatsRequestChannel</B>(java.lang.String&nbsp;channel)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setStatsConfirmSentinel(java.lang.String)"><!-- --></A><H3>
setStatsConfirmSentinel</H3>
<PRE>
public void <B>setStatsConfirmSentinel</B>(java.lang.String&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStatsConfirmSentinel()"><!-- --></A><H3>
getStatsConfirmSentinel</H3>
<PRE>
public java.lang.String <B>getStatsConfirmSentinel</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setStatsResultSentinel(java.lang.String)"><!-- --></A><H3>
setStatsResultSentinel</H3>
<PRE>
public void <B>setStatsResultSentinel</B>(java.lang.String&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStatsResultSentinel()"><!-- --></A><H3>
getStatsResultSentinel</H3>
<PRE>
public java.lang.String <B>getStatsResultSentinel</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeChannel(java.lang.String)"><!-- --></A><H3>
setProbeChannel</H3>
<PRE>
public void <B>setProbeChannel</B>(java.lang.String&nbsp;channel)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeSentinel(java.lang.String)"><!-- --></A><H3>
setProbeSentinel</H3>
<PRE>
public void <B>setProbeSentinel</B>(java.lang.String&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getProbeSentinel()"><!-- --></A><H3>
getProbeSentinel</H3>
<PRE>
public java.lang.String <B>getProbeSentinel</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeKeys(java.lang.String[])"><!-- --></A><H3>
setProbeKeys</H3>
<PRE>
public void <B>setProbeKeys</B>(java.lang.String[]&nbsp;keys)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getProbeKeys()"><!-- --></A><H3>
getProbeKeys</H3>
<PRE>
public java.lang.String[] <B>getProbeKeys</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeReplyKeys(java.lang.String[])"><!-- --></A><H3>
setProbeReplyKeys</H3>
<PRE>
public void <B>setProbeReplyKeys</B>(java.lang.String[]&nbsp;keys)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getProbeReplyKeys()"><!-- --></A><H3>
getProbeReplyKeys</H3>
<PRE>
public java.lang.String[] <B>getProbeReplyKeys</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeReplySentinel(java.lang.String)"><!-- --></A><H3>
setProbeReplySentinel</H3>
<PRE>
public void <B>setProbeReplySentinel</B>(java.lang.String&nbsp;val)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getProbeReplySentinel()"><!-- --></A><H3>
getProbeReplySentinel</H3>
<PRE>
public java.lang.String <B>getProbeReplySentinel</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setProbeReplyChannel(java.lang.String)"><!-- --></A><H3>
setProbeReplyChannel</H3>
<PRE>
public void <B>setProbeReplyChannel</B>(java.lang.String&nbsp;channel)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setTimeout(long)"><!-- --></A><H3>
setTimeout</H3>
<PRE>
public void <B>setTimeout</B>(long&nbsp;timeout)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getTimeout()"><!-- --></A><H3>
getTimeout</H3>
<PRE>
public long <B>getTimeout</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setDelim(java.lang.String)"><!-- --></A><H3>
setDelim</H3>
<PRE>
public void <B>setDelim</B>(java.lang.String&nbsp;delim)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getDelim()"><!-- --></A><H3>
getDelim</H3>
<PRE>
public java.lang.String <B>getDelim</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="rcv(org.cometd.Client, org.cometd.Message)"><!-- --></A><H3>
rcv</H3>
<PRE>
public org.cometd.Message <B>rcv</B>(org.cometd.Client&nbsp;from,
                              org.cometd.Message&nbsp;message)</PRE>
<DL>
<DD>Called whenever a message is received from a client.

 A client will initiate a stats collection run by sending a message containing the
 _statsRequestKeys structure with a _statsRequestSentinel as the value of the final key in the structure.
 This message is then passed on to the application, who should pass it back unmodified so that the
 send () method on this Extension can be called, where we can take timestamps and start measuring the stats.

 Filter the inbound messages to determine if we have received a reply to a stats probe.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>rcv</CODE> in interface <CODE>org.cometd.Extension</CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><CODE>Extension.rcv(org.cometd.Client, org.cometd.Message)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="onStatisticsRequest(org.cometd.Message)"><!-- --></A><H3>
onStatisticsRequest</H3>
<PRE>
protected void <B>onStatisticsRequest</B>(org.cometd.Message&nbsp;message)</PRE>
<DL>
<DD>Override to be able to modify the message that has been identified as a statistics request
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>message</CODE> - the bayeux message identified as statistics request</DL>
</DD>
</DL>
<HR>

<A NAME="rcvMeta(org.cometd.Client, org.cometd.Message)"><!-- --></A><H3>
rcvMeta</H3>
<PRE>
public org.cometd.Message <B>rcvMeta</B>(org.cometd.Client&nbsp;from,
                                  org.cometd.Message&nbsp;message)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>rcvMeta</CODE> in interface <CODE>org.cometd.Extension</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="send(org.cometd.Client, org.cometd.Message)"><!-- --></A><H3>
send</H3>
<PRE>
public org.cometd.Message <B>send</B>(org.cometd.Client&nbsp;from,
                               org.cometd.Message&nbsp;message)</PRE>
<DL>
<DD>Called before an outbound message is sent. Note this is called once per message only, not once per client.

 A request to start statistics collection should be passed on unmodified from the application.
 We will intercept this on the way to clients and start a stats run. We modify the outbound message to
 be a stats-probe message.

 If your application is likey to modify the message structure significantly from the _statsRequestKeys
 structure, then configure the _probeKeys so we know how to filter the outbound message.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>send</CODE> in interface <CODE>org.cometd.Extension</CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><CODE>Extension.send(org.cometd.Client, org.cometd.Message)</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendMeta(org.cometd.Client, org.cometd.Message)"><!-- --></A><H3>
sendMeta</H3>
<PRE>
public org.cometd.Message <B>sendMeta</B>(org.cometd.Client&nbsp;from,
                                   org.cometd.Message&nbsp;message)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>sendMeta</CODE> in interface <CODE>org.cometd.Extension</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="matchMessage(org.cometd.Message, java.lang.String, java.lang.String[])"><!-- --></A><H3>
matchMessage</H3>
<PRE>
public java.util.Map&lt;java.lang.String,java.lang.Object&gt; <B>matchMessage</B>(org.cometd.Message&nbsp;message,
                                                                     java.lang.String&nbsp;channel,
                                                                     java.lang.String[]&nbsp;keys)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="matchKeys(java.util.Map, java.lang.String[])"><!-- --></A><H3>
matchKeys</H3>
<PRE>
public java.util.Map&lt;java.lang.String,java.lang.Object&gt; <B>matchKeys</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;map,
                                                                  java.lang.String[]&nbsp;keys)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="matchSentinel(java.util.Map, java.lang.String, java.lang.String)"><!-- --></A><H3>
matchSentinel</H3>
<PRE>
public java.lang.String <B>matchSentinel</B>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;map,
                                      java.lang.String&nbsp;key,
                                      java.lang.String&nbsp;sentinel)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="createStatistic(org.cometd.Client, java.lang.String)"><!-- --></A><H3>
createStatistic</H3>
<PRE>
protected <A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A> <B>createStatistic</B>(org.cometd.Client&nbsp;from,
                                                        java.lang.String&nbsp;marker)</PRE>
<DL>
<DD>Start a statistics collection run.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - <DD><CODE>message</CODE> - <DD><CODE>marker</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="updateStatistic(org.cometd.Client, org.cometd.Message, java.lang.String)"><!-- --></A><H3>
updateStatistic</H3>
<PRE>
protected void <B>updateStatistic</B>(org.cometd.Client&nbsp;from,
                               org.cometd.Message&nbsp;message,
                               java.lang.String&nbsp;marker)</PRE>
<DL>
<DD>Update a statistics collection with the result for the client.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>from</CODE> - <DD><CODE>message</CODE> - <DD><CODE>marker</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="newStatistic(org.cometd.Client, long)"><!-- --></A><H3>
newStatistic</H3>
<PRE>
protected <A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext">StatisticsExtension.Statistic</A> <B>newStatistic</B>(org.cometd.Client&nbsp;from,
                                                     long&nbsp;timeout)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/StatisticsExtension.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/mortbay/cometd/ext/ArrayIdQueue.html" title="class in org.mortbay.cometd.ext"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/mortbay/cometd/ext/StatisticsExtension.Statistic.html" title="class in org.mortbay.cometd.ext"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/mortbay/cometd/ext/StatisticsExtension.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="StatisticsExtension.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 1995-2010 <a href="http://www.mortbay.com">Mort Bay Consulting</a>. All Rights Reserved.
</BODY>
</HTML>
